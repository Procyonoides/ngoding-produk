<!-- Hero Section with Transparent Navbar -->
<div class="hero-wrapper">
  <!-- Navbar Transparan -->
  <app-navbar [isAdmin]="false" [transparent]="true"></app-navbar>
  
  <!-- Hero Content -->
  <div class="hero-section-full">
    <div class="hero-overlay">
      <div class="container-fluid px-4">
        <div class="hero-content text-center text-white">
          <h1 class="hero-title fw-bold mb-3">Cari Funitur Impian</h1>
          <p class="hero-subtitle mb-5">Cari furniture mulai dari meja, lemari, hingga rak di sini</p>

          <!-- Search Box -->
          <div class="search-container mx-auto">
            <div class="search-box-large">
              <i class="bi bi-search search-icon"></i>
              <input type="text" 
                     class="form-control search-input" 
                     placeholder="Cari produk" 
                     [(ngModel)]="searchQuery" 
                     (keyup.enter)="searchProduct()">
              <button class="btn btn-search" (click)="searchProduct()">
                <i class="bi bi-search"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Main Content -->
<div class="content-wrapper">
  <div class="container-fluid px-4 py-5">

    <!-- Loading -->
    <div *ngIf="loading" class="text-center py-5">
      <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p class="mt-3 text-muted">Memuat produk...</p>
    </div>

    <!-- Error Message -->
    <div *ngIf="errorMessage" class="alert alert-danger alert-dismissible fade show" role="alert">
      <i class="bi bi-exclamation-circle me-2"></i>
      {{ errorMessage }}
      <button type="button" class="btn-close" (click)="errorMessage = ''"></button>
    </div>

    <!-- Section Header -->
    <div class="section-header d-flex justify-content-between align-items-center mb-4 fade-in px-5" 
         *ngIf="!loading" 
         style="animation-delay: 0.1s;">
      <div>
        <h4 class="fw-bold mb-1">Rekomendasi Produk</h4>
        <p class="text-muted mb-0">Produk-produk pilihan terbaik dari kami</p>
      </div>
      <button class="btn btn-outline-dark" (click)="searchQuery = ''; searchProduct()">
        <i class="bi bi-grid me-2"></i>
        Lihat Semua
      </button>
    </div>

    <!-- Product Grid -->
    <div class="row g-4 fade-in px-5" *ngIf="!loading" style="animation-delay: 0.2s;">
      <div class="col-lg-3 col-md-4 col-sm-6" *ngFor="let product of displayedProducts">
        <div class="product-card card border-0 shadow-sm h-100" (click)="viewProductDetail(product._id)">
          <div class="product-image-wrapper">
            <img [src]="product.imageUrl || 'https://via.placeholder.com/300x200'" 
                 class="card-img-top" 
                 alt="{{ product.name }}">
            <div class="product-badge" *ngIf="product.status === 'Menipis'">
              <span class="badge bg-warning">Stok Terbatas</span>
            </div>
          </div>
          <div class="card-body p-3">
            <h6 class="product-title fw-bold mb-2 text-truncate">{{ product.name }}</h6>
            <p class="product-description text-muted small mb-2 text-truncate">
              {{ product.description }}
            </p>
            <div class="d-flex justify-content-between align-items-center mb-2">
              <h5 class="product-price text-danger fw-bold mb-0">
                Rp {{ product.price | number:'1.0-0' }}
              </h5>
            </div>
            <div class="product-meta d-flex justify-content-between align-items-center small text-muted">
              <span>
                <i class="bi bi-star-fill text-warning me-1"></i>
                {{ product.rating || 4.5 }}
              </span>
              <span>{{ product.sold || 0 }} Terjual</span>
            </div>
          </div>
        </div>
      </div>

      <!-- No Products Found -->
      <div class="col-12 text-center py-5" *ngIf="filteredProducts.length === 0">
        <i class="bi bi-inbox" style="font-size: 4rem; color: #ccc;"></i>
        <h5 class="mt-3 text-muted">Tidak ada produk yang ditemukan</h5>
        <p class="text-muted mb-3">Coba kata kunci lain atau lihat semua produk</p>
        <button class="btn btn-primary px-5" (click)="searchQuery = ''; searchProduct()">
          <i class="bi bi-grid me-2"></i>
          Lihat Semua Produk
        </button>
      </div>
    </div>

    <!-- Pagination -->
    <div class="pagination-wrapper mt-5 d-flex justify-content-between align-items-center fade-in" 
         *ngIf="!loading && displayedProducts.length > 0" 
         style="animation-delay: 0.3s;">
      <div class="pagination-info text-muted">
        Menampilkan {{ getDisplayRange().start }} - {{ getDisplayRange().end }} 
        dari {{ getDisplayRange().total }} produk
      </div>

      <nav>
        <ul class="pagination mb-0">
          <!-- Previous Button -->
          <li class="page-item" [class.disabled]="currentPage === 1">
            <a class="page-link" (click)="previousPage()" tabindex="-1">
              <i class="bi bi-chevron-left"></i>
            </a>
          </li>

          <!-- Page Numbers -->
          <li class="page-item" 
              *ngFor="let page of getPaginationPages()"
              [class.active]="page === currentPage"
              [class.disabled]="page === -1">
            <a class="page-link" *ngIf="page !== -1" (click)="goToPage(page)">
              {{ page }}
            </a>
            <span class="page-link" *ngIf="page === -1">...</span>
          </li>

          <!-- Next Button -->
          <li class="page-item" [class.disabled]="currentPage === totalPages">
            <a class="page-link" (click)="nextPage()">
              <i class="bi bi-chevron-right"></i>
            </a>
          </li>
        </ul>
      </nav>
    </div>
    
  </div>
</div>